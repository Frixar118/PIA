{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Comentarios - Café Mapachitos</title>
    <link rel="stylesheet" href="{% static 'estilos.css' %}">

    <script>
        function actualizarContador() {
            let textarea = document.getElementById("texto");
            let contador = document.getElementById("contador");
            contador.innerText = textarea.value.length + "/200 caracteres";
        }
    </script>
</head>

<body>

<header class="header">
    <h1 class="titulo-principal">Comentarios de Clientes</h1>

    <nav class="menu">
        <a href="{% url 'inicio' %}">Inicio</a>
        <a href="{% url 'productos' %}">Productos</a>
        <a href="{% url 'autos' %}">Autos</a>
        <a href="{% url 'eventos' %}">Eventos</a>
        <a href="{% url 'sucursales' %}">Sucursales</a>
        <a href="{% url 'comentarios' %}">Comentarios</a>
        <a href="/admin/login/" class="login-btn">Iniciar sesión</a>
    </nav>
</header>

<main class="contenido">

    <h2 class="subtitulo">Déjanos tu opinión</h2>
    <p class="descripcion-menu">
        Tus comentarios son muy importantes para mejorar la experiencia en Café Mapachitos.
    </p>

    <!-- FORMULARIO -->
    <form action="" method="post">
        {% csrf_token %}

        <div class="comentario">
            <h3>Nuevo comentario</h3>

            <label>Nombre:</label><br>
            <input type="text" name="nombre" required><br><br>

            <label>Comentario:</label><br>
            <textarea id="texto" name="mensaje" maxlength="200" onkeyup="actualizarContador()" required></textarea>

            <p id="contador">0/200 caracteres</p>

            <input type="submit" value="Enviar comentario">
        </div>
    </form>

    <h2 class="subtitulo">Comentarios recientes</h2>

    {% for comentario in comentarios %}
        <div class="comentario">
            <h3>{{ comentario.nombre }}</h3>
            <p>{{ comentario.mensaje }}</p>
            <small>{{ comentario.fecha }}</small>
        </div>
    {% empty %}
        <p>No hay comentarios aún. ¡Sé el primero!</p>
    {% endfor %}

</main>

<footer class="footer">
    <p>© 2025 Café Mapachitos - Proyecto PIA</p>
</footer>

</body>
</html>
